(this.webpackJsonpxwords=this.webpackJsonpxwords||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){},74:function(e,t){},76:function(e,t){},86:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),s=n.n(c),i=n(49),o=n.n(i),u=(n(58),n(3)),a=(n(59),n(50)),h=n.n(a),l=n(51),d=n(52);function f(e,t,n,r){var c=e[t][0].$,s=(parseInt(c.n)-1)/n>>0,i=(parseInt(c.n)-1)%n;return c.row=s,c.col=i,c}var j=function(){function e(t){var n=this;Object(l.a)(this,e),this.reference=[],this.guesses=[],this.clueMap=[],this.width=0,this.height=0,this.cursorX=0,this.cursorY=0,this.direction=0,this.cluesDown={},this.cluesAcross={},this.corrects=0,this.total=0,t=t.crossword,this.width=parseInt(t.Width[0].$.v||0),this.height=parseInt(t.Height[0].$.v||0);var r=Object.keys(t.across[0]).map((function(e){return f(t.across[0],e,n.width,n.height)})),c=Object.keys(t.down[0]).map((function(e){return f(t.down[0],e,n.width,n.height)}));c.forEach((function(e){n.cluesDown[e.cn]=e})),r.forEach((function(e){n.cluesAcross[e.cn]=e}));for(var s=0;s<this.height;s++){for(var i=[],o=0;o<this.width;o++)i.push(null);this.guesses.push([].concat(i)),this.reference.push([].concat(i)),this.clueMap.push([].concat(i))}for(var u=0;u<r.length;u++)for(var a=r[u],h=a.row,d=a.col,j=0;j<a.a.length;j++)this.reference[h][d+j]=a.a[j],this.clueMap[h][d+j]={across:{index:a.cn,isStart:0===j}},this.guesses[h][d+j]="",this.total++;c.forEach((function(e){for(var t=0;t<e.a.length;t++)n.clueMap[e.row+t][e.col].down={index:e.cn,isStart:0===t}}))}return Object(d.a)(e,[{key:"setCursor",value:function(e,t){return e<this.width&&e>=0&&t<this.height&&t>=0&&(this.cursorX=e,this.cursorY=t),{x:this.cursorX,y:this.cursorY}}},{key:"_movement",value:function(e){var t=this.cursorX,n=this.cursorY;do{var r=e(t,n);t=r.x,n=r.y}while(t<this.width&&n<this.height&&t>=0&&n>=0&&null===this.reference[n][t]);return this.setCursor(t,n)}},{key:"right",value:function(){return this._movement((function(e,t){return{x:e+1,y:t}}))}},{key:"down",value:function(){return this._movement((function(e,t){return{x:e,y:t+1}}))}},{key:"up",value:function(){return this._movement((function(e,t){return{x:e,y:t-1}}))}},{key:"left",value:function(){return this._movement((function(e,t){return{x:e-1,y:t}}))}},{key:"step",value:function(){return 0===this.direction?this.right():1===this.direction?this.down():void 0}},{key:"prev",value:function(){return 0===this.direction?this.left():1===this.direction?this.up():void 0}},{key:"_isWordCompleted",value:function(e,t){for(var n=0;n<e.a.length;n++){var r=e.row+(1===t?n:0),c=e.col+(0===t?n:0);if(this.guesses[r][c]!==this.reference[r][c])return{isComplete:!1,x:c,y:r}}return{isComplete:!0}}},{key:"_nextWord",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.currentClue(),n=0===this.direction?this.cluesAcross:this.cluesDown,r=Object.keys(n),c=r.findIndex((function(e){return e===t.cn}));c+e<r.length&&c+e>=0;){var s=n[r[c+e]],i=this._isWordCompleted(s,this.direction);if(!i.isComplete)return this.setCursor(i.x,i.y);c+=e}var o=n[r[c]];return this.setCursor(o.col,o.row)}},{key:"nextWord",value:function(){return this._nextWord(1)}},{key:"prevWord",value:function(){return this._nextWord(-1)}},{key:"changeDirection",value:function(){this.direction=(this.direction+1)%2}},{key:"_updateGuess",value:function(e){this.guesses[this.cursorY][this.cursorX]===this.reference[this.cursorY][this.cursorX]&&this.corrects--,this.guesses[this.cursorY][this.cursorX]=e,this.guesses[this.cursorY][this.cursorX]===this.reference[this.cursorY][this.cursorX]&&this.corrects++}},{key:"keypress",value:function(e,t){e=e.toUpperCase();var n=/[A-Z]/.test(e);if("ARROWRIGHT"===e)this.right();else if("ARROWDOWN"===e)this.down();else if("ARROWLEFT"===e)this.left();else if("ARROWUP"===e)this.up();else if("ENTER"===e)this.changeDirection();else if("TAB"===e)t?this.prevWord():this.nextWord();else if("BACKSPACE"===e)this._updateGuess(" "),this.prev();else if(n&&1===e.length){if(this._updateGuess(e),e===this.reference[this.cursorY][this.cursorX]){var r=this.currentWordRange(),c=r[r.length-1];c[0]===this.cursorX&&c[1]===this.cursorY?this.nextWord():this.step()}}else" "===e&&this.step();return{x:this.cursorX,y:this.cursorY}}},{key:"currentClue",value:function(){var e=this.cursorX,t=this.cursorY,n=null,r=this.clueMap[t][e];return 0===this.direction?n=this.cluesAcross[r.across.index]:1===this.direction&&(n=this.cluesDown[r.down.index]),n}},{key:"currentWordRange",value:function(){var e=this.currentClue();return 0===this.direction?e.a.split("").map((function(t,n){return[e.col+n,e.row]})):1===this.direction?e.a.split("").map((function(t,n){return[e.col,e.row+n]})):void 0}},{key:"currentClueMapping",value:function(){var e=this.cursorX,t=this.cursorY;return this.clueMap[t][e]}},{key:"isOver",value:function(){return this.total===this.corrects}}]),e}(),v=Object(c.createContext)({cursorX:0,cursorY:0,currRange:[],direction:0,onCellClick:function(e,t){},lastGuessed:"",clueMap:{}}),b=function(e){var t=e.content,n=e.reference,s=e.x,i=e.y,o="cell",u=t,a=Object(c.useContext)(v),h=a.onCellClick,l=a.cursorX,d=a.cursorY,f=a.clueMap,j=a.currRange,b=Object(c.useCallback)((function(){null!==t&&h(s,i)}),[h,s,i,t]);null===t&&(o+=" blank",u="\xa0"),s===l&&i===d&&(o+=" selected"),""!==t&&null!==t&&t!==n&&(o+=" incorrect"),j.filter((function(e){return e[0]===s&&e[1]===i})).length>0&&(o+=" in-range");var O=null;return f[i][s]&&f[i][s].across.isStart?O=Object(r.jsx)("span",{className:"indicator",children:f[i][s].across.index}):f[i][s]&&f[i][s].down.isStart&&(O=Object(r.jsx)("span",{className:"indicator",children:f[i][s].down.index})),Object(r.jsxs)("span",{className:o,onClick:b,children:[O,u]})},O=function(e){var t=e.row,n=e.refRow,c=e.y;return Object(r.jsx)("div",{children:t.map((function(e,s){return Object(r.jsx)(b,{content:e,reference:n[s],x:s,y:c},"".concat(t,":").concat(s))}))})},p=function(e){var t=e.game,n=Object(c.useState)(0),s=Object(u.a)(n,2),i=s[0],o=s[1],a=Object(c.useState)(0),h=Object(u.a)(a,2),l=h[0],d=h[1],f=Object(c.useState)([]),j=Object(u.a)(f,2),b=j[0],p=j[1],g=Object(c.useState)(0),x=Object(u.a)(g,2),m=x[0],C=x[1],w=Object(c.useState)(null),k=Object(u.a)(w,2),S=k[0],R=k[1],X=Object(c.useContext)(y),Y=X.onCellChanged,N=X.onOver,W=Object(c.useCallback)((function(e){o(e.cursorX),d(e.cursorY),p(e.currentWordRange()),C(e.direction),Y()}),[Y]),D=Object(c.useCallback)((function(e,n){t.cursorX===e&&t.cursorY===n&&t.changeDirection(),t.setCursor(e,n),W(t)}),[t,W]),P=Object(c.useCallback)((function(e){return t.keypress(e.key,e.shiftKey),R("".concat(t.cursorX,":").concat(t.cursorY,":").concat(e.key)),W(t),t.isOver()&&N(),e.preventDefault(),!1}),[t,W,N]);return Object(c.useEffect)((function(){W(t)}),[t,W]),Object(c.useEffect)((function(){return document.addEventListener("keydown",P),function(){document.removeEventListener("keydown",P)}}),[P]),Object(r.jsx)("div",{className:"board",children:Object(r.jsx)(v.Provider,{value:{cursorX:i,cursorY:l,currRange:b,direction:m,onCellClick:D,lastGuessed:S,clueMap:t.clueMap},children:t.guesses.map((function(e,n){return Object(r.jsx)(O,{row:e,refRow:t.reference[n],y:n},n)}))})})};function g(e,t){return"clue-".concat(t,"-").concat(e)}var x=function(e){var t=e.game,n=e.direction,s=e.highlighted,i=Object(c.useState)(0),o=Object(u.a)(i,2),a=o[0],h=o[1],l=0===n?t.cluesAcross:t.cluesDown,d=Object.keys(l).map((function(e){return l[e]})),f=Object(c.useContext)(y).currentClueIndices,j=d.reduce((function(e,t){return e[g(t.cn,n)]=Object(c.createRef)(),e}),{}),v=Object(c.useCallback)((function(e){j[e]&&j[e].current.scrollIntoView({behavior:"auto",block:"center"})}),[j]);Object(c.useEffect)((function(){var e="";e=0===n?f.across:f.down,h(e);var t=g(e,n);v(t)}),[f,n,v]);var b=Object(c.useCallback)((function(e){return e.cn===a?s?"selected highlighted":"selected":null}),[a,s]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:0===n?"Across":"Down"}),Object(r.jsx)("div",{className:"clue-list",children:d.map((function(e){return Object(r.jsxs)("div",{ref:j[g(e.cn,n)],className:b(e,s),children:[Object(r.jsxs)("span",{children:[e.cn,".\xa0"]}),decodeURIComponent(e.c)]},g(e.cn,n))}))},"clues-list-".concat(n))]})},m=function(){var e=Object(c.useState)(0),t=Object(u.a)(e,2),n=t[0],s=t[1],i=Object(c.useContext)(y),o=i.onPlayPause,a=i.isPlaying,h=function(){o(!a)};return Object(c.useEffect)((function(){if(a){var e=setInterval((function(){s((function(e){return e+1}))}),1e3);return function(){clearInterval(e)}}}),[a]),Object(r.jsxs)("div",{className:"gamebar",children:[!a&&Object(r.jsxs)("span",{onClick:h,className:"button item",children:[Object(r.jsx)("i",{className:"fa fa-play",style:{marginRight:5}}),"Resume"]}),a&&Object(r.jsxs)("span",{onClick:h,className:"button item",children:[Object(r.jsx)("i",{className:"fa fa-pause",style:{marginRight:5}}),"Pause"]}),Object(r.jsxs)("span",{className:"item",children:[(n/60>>0).toString().padStart(2,"0"),":",(n%60).toString().padStart(2,"0")]})]})},y=Object(c.createContext)({currentClueIndices:{},isPlaying:!0,onCellChanged:function(){},onPlayPause:function(e){},onOver:function(){}});var C=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)({}),o=Object(u.a)(i,2),a=o[0],l=o[1],d=Object(c.useState)(!0),f=Object(u.a)(d,2),v=f[0],b=f[1],O=Object(c.useState)(!1),g=Object(u.a)(O,2),C=g[0],w=g[1];Object(c.useEffect)((function(){var e=(new Date).toLocaleDateString("en-US").split("/"),t=Object(u.a)(e,3),n=t[0],r=t[1],c=t[2];n=n.padStart(2,"0"),r=r.padStart(2,"0"),c=c.slice(2,4),fetch("".concat("https://cors-anywhere.herokuapp.com/","http://picayune.uclick.com/comics/usaon/data/usaon").concat(c).concat(n).concat(r,"-data.xml"),{origin:"http://example.com"}).then((function(e){return e.text()})).then((function(e){return h.a.parseStringPromise(e)})).then((function(e){var t=new j(e);window.game=t,s(t)}))}),[]);var k=Object(c.useCallback)((function(){if(n){var e=n.currentClueMapping();l({across:e.across.index,down:e.down.index,highlightDirection:n.direction})}}),[n]),S=function(e){b(e)};return Object(r.jsx)("div",{className:"App",children:n&&Object(r.jsx)("div",{children:Object(r.jsxs)(y.Provider,{value:{currentClueIndices:a,isPlaying:v,onCellChanged:k,onPlayPause:S,onOver:function(){S(!1),w(!0)}},children:[Object(r.jsx)(m,{}),Object(r.jsxs)("div",{className:"game-container ".concat(v?"playing":"paused"),children:[Object(r.jsxs)("div",{className:"game-area",children:[Object(r.jsx)(p,{game:n}),Object(r.jsxs)("div",{className:"clues-area",children:[Object(r.jsx)(x,{direction:0,highlighted:0===a.highlightDirection,game:n}),Object(r.jsx)(x,{direction:1,highlighted:1===a.highlightDirection,game:n})]})]}),Object(r.jsx)("div",{className:"veil",children:C&&Object(r.jsx)("div",{children:"Congrats!"})})]})]})})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),s(e),i(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(C,{})}),document.getElementById("root")),w()}},[[86,1,2]]]);
//# sourceMappingURL=main.7d772744.chunk.js.map